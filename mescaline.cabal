name:               mescaline
version:            0.0.1
synopsis:           Mescaline is a data-driven sequencer and synthesizer.
description:        Mescaline is a data-driven sequencer and synthesizer.
category:           Sound
license:            GPL-3
license-file:       COPYING
author:             globero.es
copyright:          (c) 2009-2010 globero.es
maintainer:         mescaline@globero.es
homepage:           http://mescaline.globero.es
bug-reports:        http://sourceforge.net/tracker/?group_id=266308&atid=1133628
cabal-version:      >= 1.2
build-type:         Custom

extra-source-files:
    README

data-dir:
    resources

data-files:
    config
    editor.ui
    mescaline.ui
    messages.ui

    patches/default.hs
    patches/examples/brown.msc
    patches/examples/brown_polar.msc
    patches/examples/choose.msc
    patches/examples/feature_to_amp.msc
    patches/examples/feature_to_effect.msc
    patches/examples/feature_to_pan.msc
    patches/examples/player.msc
    patches/examples/rest.msc
    patches/examples/seq.msc
    patches/examples/takeDur.msc

    meap/2.0/getopt-1.0.12.jar
    meap/2.0/jl1.0.jar
    meap/2.0/MEAPsoft.jar
    meap/2.0/mp3spi1.9.4.jar
    meap/2.0/swing-layout-1.0.jar
    meap/2.0/tritonus_misc.jar
    meap/2.0/tritonus_mp3.jar
    meap/2.0/tritonus_share.jar

    src/Mescaline/Synth/Pattern/AST.hs
    src/Mescaline/Synth/Pattern/ASTLib.hs

    hugs/packages/base/Control/Applicative.hs
    hugs/packages/base/Control/Arrow.hs
    hugs/packages/base/Control/Concurrent/Chan.hs
    hugs/packages/base/Control/Concurrent/MVar.hs
    hugs/packages/base/Control/Concurrent/QSem.hs
    hugs/packages/base/Control/Concurrent/QSemN.hs
    hugs/packages/base/Control/Concurrent/SampleVar.hs
    hugs/packages/base/Control/Concurrent.hs
    hugs/packages/base/Control/Exception.hs
    hugs/packages/base/Control/Monad/Fix.hs
    hugs/packages/base/Control/Monad/Instances.hs
    hugs/packages/base/Control/Monad/ST/Lazy.hs
    hugs/packages/base/Control/Monad/ST/Strict.hs
    hugs/packages/base/Control/Monad/ST.hs
    hugs/packages/base/Control/Monad.hs
    hugs/packages/base/Control/Parallel.hs
    hugs/packages/base/Data/Array/Base.hs
    hugs/packages/base/Data/Array/Diff.hs
    hugs/packages/base/Data/Array/IArray.hs
    hugs/packages/base/Data/Array/IO/Internals.hs
    hugs/packages/base/Data/Array/IO.hs
    hugs/packages/base/Data/Array/MArray.hs
    hugs/packages/base/Data/Array/ST.hs
    hugs/packages/base/Data/Array/Storable.hs
    hugs/packages/base/Data/Array/Unboxed.hs
    hugs/packages/base/Data/Array.hs
    hugs/packages/base/Data/Bits.hs
    hugs/packages/base/Data/Bool.hs
    hugs/packages/base/Data/Char.hs
    hugs/packages/base/Data/Complex.hs
    hugs/packages/base/Data/Dynamic.hs
    hugs/packages/base/Data/Either.hs
    hugs/packages/base/Data/Eq.hs
    hugs/packages/base/Data/Fixed.hs
    hugs/packages/base/Data/Foldable.hs
    hugs/packages/base/Data/FunctorM.hs
    hugs/packages/base/Data/Graph.hs
    hugs/packages/base/Data/HashTable.hs
    hugs/packages/base/Data/Int.hs
    hugs/packages/base/Data/IntMap.hs
    hugs/packages/base/Data/IntSet.hs
    hugs/packages/base/Data/IORef.hs
    hugs/packages/base/Data/Ix.hs
    hugs/packages/base/Data/List.hs
    hugs/packages/base/Data/Map.hs
    hugs/packages/base/Data/Maybe.hs
    hugs/packages/base/Data/Monoid.hs
    hugs/packages/base/Data/Ord.hs
    hugs/packages/base/Data/PackedString.hs
    hugs/packages/base/Data/Queue.hs
    hugs/packages/base/Data/Ratio.hs
    hugs/packages/base/Data/Sequence.hs
    hugs/packages/base/Data/Set.hs
    hugs/packages/base/Data/STRef/Lazy.hs
    hugs/packages/base/Data/STRef/Strict.hs
    hugs/packages/base/Data/STRef.hs
    hugs/packages/base/Data/Traversable.hs
    hugs/packages/base/Data/Tree.hs
    hugs/packages/base/Data/Tuple.hs
    hugs/packages/base/Data/Typeable.hs
    hugs/packages/base/Data/Unique.hs
    hugs/packages/base/Data/Version.hs
    hugs/packages/base/Data/Word.hs
    hugs/packages/base/Prelude.hs
    hugs/packages/base/System/IO/Error.hs
    hugs/packages/base/System/IO/Unsafe.hs
    hugs/packages/base/System/IO.hs
    hugs/packages/base/System/Random.hs
    hugs/packages/hugsbase/Hugs/Array.hs
    hugs/packages/hugsbase/Hugs/Bits.hs
    hugs/packages/hugsbase/Hugs/ByteArray.hs
    hugs/packages/hugsbase/Hugs/Char.hs
    hugs/packages/hugsbase/Hugs/ConcBase.hs
    hugs/packages/hugsbase/Hugs/CVHAssert.hs
    hugs/packages/hugsbase/Hugs/Directory.hs
    hugs/packages/hugsbase/Hugs/Dynamic.hs
    hugs/packages/hugsbase/Hugs/Exception.hs
    hugs/packages/hugsbase/Hugs/ForeignPtr.hs
    hugs/packages/hugsbase/Hugs/GenericPrint.hs
    hugs/packages/hugsbase/Hugs/Int.hs
    hugs/packages/hugsbase/Hugs/Internals.hs
    hugs/packages/hugsbase/Hugs/IO.hs
    hugs/packages/hugsbase/Hugs/IOArray.hs
    hugs/packages/hugsbase/Hugs/IOExts.hs
    hugs/packages/hugsbase/Hugs/IORef.hs
    hugs/packages/hugsbase/Hugs/LazyST.hs
    hugs/packages/hugsbase/Hugs/Memo.hs
    hugs/packages/hugsbase/Hugs/Numeric.hs
    hugs/packages/hugsbase/Hugs/Observe.hs
    hugs/packages/hugsbase/Hugs/Prelude.hs
    hugs/packages/hugsbase/Hugs/Ptr.hs
    hugs/packages/hugsbase/Hugs/Quote.hs
    hugs/packages/hugsbase/Hugs/ST.hs
    hugs/packages/hugsbase/Hugs/Stable.hs
    hugs/packages/hugsbase/Hugs/StablePtr.hs
    hugs/packages/hugsbase/Hugs/Storable.hs
    hugs/packages/hugsbase/Hugs/System.hs
    hugs/packages/hugsbase/Hugs/Time.hs
    hugs/packages/hugsbase/Hugs/Trex.hs
    hugs/packages/hugsbase/Hugs/Weak.hs
    hugs/packages/hugsbase/Hugs/Word.hs
    hugs/packages/hugsbase/Hugs.hs
    hugs/packages/mtl/Control/Monad/Cont.hs
    hugs/packages/mtl/Control/Monad/Error.hs
    hugs/packages/mtl/Control/Monad/Identity.hs
    hugs/packages/mtl/Control/Monad/List.hs
    hugs/packages/mtl/Control/Monad/Reader.hs
    hugs/packages/mtl/Control/Monad/RWS.hs
    hugs/packages/mtl/Control/Monad/State.hs
    hugs/packages/mtl/Control/Monad/Trans.hs
    hugs/packages/mtl/Control/Monad/Writer.hs
    hugs/packages/mtl/LICENSE

flag build-app-bundle
    description: Build an MacOS X application bundle
    default: False

library
    hs-source-dirs: src
    ghc-options:    -Wall
    include-dirs:   include
    build-depends:
        base >= 4 && < 5
      , array >= 0.2 && < 0.4
      -- , arrows
      , binary
      , bitset >= 1.0 && < 1.1
      , bytestring
      , Cabal >= 1.6
      -- , CCA >= 0.1.3 && < 0.2
      , containers
      , ConfigFile >= 1.0 && < 1.1
      , Control-Engine >= 1.0 && < 1.2
      , Crypto >= 4.2 && < 4.3
      , data-accessor >= 0.2 && < 0.3
      , data-accessor-mtl >= 0.2 && < 0.3
      , data-ivar >= 0.30 && < 0.31
      , deepseq >= 1.1 && < 1.2
      , directory
      , filepath
      , FindBin >= 0.0 && < 0.1
      , fingertree
      , HDBC >= 1.1 && < 2
      , HDBC-sqlite3 >= 1.1 && < 2
      , hmatrix >= 0.10 && < 0.11
      , hmeap >= 0.8
      , hosc >= 0.8
      , hslogger >= 1.1
      , hsc3 >= 0.8
      , hsc3-lang >= 0.8
      , hsc3-process >= 0.3 && < 0.4
      , hsndfile >= 0.4
      , MonadCatchIO-mtl >= 0.3 && < 0.4
      , MonadRandom >= 0.1
      , mtl >= 1.0
      , parallel >= 3 && < 4
      , process >= 1.0
      , qt >= 1.1 && < 1.2
      , random >= 1.0
      , regex-compat >= 0.92
      -- , statistics >= 0.8 && < 0.9
      , strict-concurrency >= 0.2
      -- , template-haskell
      , uuid >= 1.0
      , vector >= 0.5
    exposed-modules:
        -- Control.CCA.ArrowP
        Control.Concurrent.Chan.Chunked
        Control.Concurrent.MVar.StrictModify
        Data.KDTree
        -- Data.Signal.SF
        -- Data.Signal.SF.Base
        -- Data.Signal.SF.Event
        Mescaline
        Mescaline.Application
        Mescaline.Application.Config
        Mescaline.Application.Desktop
        Mescaline.Application.Logger
        Mescaline.Data.ByteString
        Mescaline.Data.ListReader
        Mescaline.Data.Unique
        Mescaline.Database
        Mescaline.Database.Feature
        Mescaline.Database.Model
        -- Mescaline.Database.Query
        Mescaline.Database.SoundFile
        Mescaline.Database.SourceFile
        Mescaline.Database.Sql
        Mescaline.Database.SqlQuery
        Mescaline.Database.Table
        Mescaline.Database.Unit
        Mescaline.Math
        Mescaline.Meap.Chain
        Mescaline.Meap.Extractor
        Mescaline.Meap.Feature
        Mescaline.Meap.Import
        Mescaline.Meap.Process
        Mescaline.Meap.Segmenter
        Mescaline.Statistics.PCA
        Mescaline.Synth.BufferCache
        Mescaline.Synth.BufferCache.Alloc
        Mescaline.Synth.BufferCache.Server
        Mescaline.Synth.Database.Model
        Mescaline.Synth.Database.Process
        Mescaline.Synth.FeatureSpace.Model
        Mescaline.Synth.FeatureSpace.Process
        Mescaline.Synth.FeatureSpace.Unit
        Mescaline.Synth.FeatureSpace.View
        Mescaline.Synth.OSCServer
        Mescaline.Synth.Pattern
        Mescaline.Synth.Pattern.AST
        Mescaline.Synth.Pattern.ASTLib
        Mescaline.Synth.Pattern.Base
        Mescaline.Synth.Pattern.Binding
        Mescaline.Synth.Pattern.Compiler
        Mescaline.Synth.Pattern.Environment
        Mescaline.Synth.Pattern.Event
        Mescaline.Synth.Pattern.Interpreter
        Mescaline.Synth.Pattern.Library
        Mescaline.Synth.Pattern.Patch
        Mescaline.Synth.Pattern.Patch.Version_0_0_1
        Mescaline.Synth.Pattern.Ppar
        Mescaline.Synth.Pattern.Player
        Mescaline.Synth.Pattern.Process
        Mescaline.Synth.Pattern.Sequencer
        Mescaline.Synth.Pattern.View
        Mescaline.Synth.Sampler.Model
        Mescaline.Synth.Sampler.Process
        Mescaline.Synth.Sequencer.Model
        Mescaline.Synth.Sequencer.Process
        Mescaline.Synth.Sequencer.View
        -- Mescaline.Synth.SSF
        -- Mescaline.Synth.SSF.BufferCache
        -- Mescaline.Synth.SSF.DiskSampler
        Mescaline.Time
        Mescaline.UI
        Mescaline.Util
        Sound.SC3.Server.Allocator
        Sound.SC3.Server.Allocator.Range
        Sound.SC3.Server.Allocator.SetAllocator
        Sound.SC3.Server.Allocator.SimpleAllocator
        Sound.SC3.Server.Connection
        Sound.SC3.Server.Monad
        Sound.SC3.Server.Notification
        Sound.SC3.Server.Process.Monad
        Sound.SC3.Server.State
        Sound.SC3.Server.State.IO
    other-modules:
        Paths_mescaline

executable mescaline
    main-is:            main.hs
    hs-source-dirs:     app, src
    include-dirs:       include
    ghc-options:        -threaded
    ghc-prof-options:   -threaded -auto-all
    build-depends:
        qt >= 1.1 && < 1.2
    if os(darwin)
        build-depends:
            cabal-macosx >= 0.1 && < 0.2
        ld-options:
            -headerpad_max_install_names
    if flag(build-app-bundle)
        x-build-app-bundle: True

executable mescalinedb
    main-is:            mescalinedb.hs
    build-depends:      hmatrix >= 0.10 && < 0.11
    ghc-options:        -threaded -funbox-strict-fields
    hs-source-dirs:     src, tools
